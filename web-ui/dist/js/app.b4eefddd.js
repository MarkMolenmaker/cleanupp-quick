(function(){"use strict";var e={9358:function(e,t,s){var a=s(9242),n=s(3396),o=s(7139);const r=(0,n._)("span",{class:"title"},"CleanUpp Quick",-1),i={class:"message"},l={key:0,class:"loading-main"},d=(0,n._)("span",{class:"loading-title"},"Loading...",-1),c={key:1},u=(0,n._)("footer",null,[(0,n._)("span",{class:"text-content"},"Versie 2.0.1")],-1);function p(e,t,s,a,p,m){const g=(0,n.up)("LoginSection"),k=(0,n.up)("DashboardSection");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("header",null,[r,(0,n._)("span",i,(0,o.zw)(e.message),1)]),e.isLoading?((0,n.wg)(),(0,n.iD)("main",l,[d,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.messageHistory,((e,t)=>((0,n.wg)(),(0,n.iD)("span",{class:"loading-message",key:t},(0,o.zw)(e),1)))),128))])):((0,n.wg)(),(0,n.iD)("main",c,[e.isLoggedIn?((0,n.wg)(),(0,n.j4)(k,{key:1})):((0,n.wg)(),(0,n.j4)(g,{key:0}))])),u],64)}var m=s(65);const g=e=>((0,n.dD)("data-v-e8439b5a"),e=e(),(0,n.Cn)(),e),k={class:"login-container"},h={class:"text"},b=g((()=>(0,n._)("span",null,"Gebruikersnaam",-1))),f={class:"text"},w=g((()=>(0,n._)("span",null,"Wachtwoord",-1))),v=g((()=>(0,n._)("button",{type:"submit"},"Inloggen",-1)));function y(e,t,s,o,r,i){return(0,n.wg)(),(0,n.iD)("section",k,[(0,n._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[(0,n._)("label",h,[b,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e)},null,512),[[a.nr,r.username]])]),(0,n._)("label",f,[w,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e)},null,512),[[a.nr,r.password]])]),v],32)])}var _={name:"LoginSection",data(){return{username:"",password:""}},methods:{login(){this.$store.dispatch("login",{username:this.username,password:this.password})}}},D=s(89);const T=(0,D.Z)(_,[["render",y],["__scopeId","data-v-e8439b5a"]]);var C=T;const S=e=>((0,n.dD)("data-v-e3a43192"),e=e(),(0,n.Cn)(),e),L={class:"dashboards-section"},j={class:"form-container"},I={class:"text"},O=S((()=>(0,n._)("span",null,"Datum",-1))),x=S((()=>(0,n._)("button",{type:"submit"},"Gegeven inladen",-1))),E={class:"checkbox"},M=S((()=>(0,n._)("span",null,"Ingevulde taken overslaan",-1))),z={class:"checkbox"},H=S((()=>(0,n._)("span",null,"Willekeurige waarde",-1))),N=S((()=>(0,n._)("button",{type:"submit"},"Automatisch invullen",-1))),V={class:"text"},q=S((()=>(0,n._)("span",null,"Winkel",-1))),P=S((()=>(0,n._)("button",{type:"submit"},"Uitloggen",-1)));function U(e,t,s,o,r,i){const l=(0,n.up)("DashboardContainer");return(0,n.wg)(),(0,n.iD)("section",L,[(0,n._)("div",j,[(0,n._)("form",{onSubmit:t[1]||(t[1]=(0,a.iM)((e=>this.$store.dispatch("loadDashboardsData")),["prevent"]))},[(0,n._)("label",I,[O,(0,n.wy)((0,n._)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=t=>e.date=t)},null,512),[[a.nr,e.date]])]),x],32),(0,n._)("form",{onSubmit:t[4]||(t[4]=(0,a.iM)((e=>this.$store.dispatch("autocompleteTasks")),["prevent"]))},[(0,n._)("label",E,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.skipCompleted=t),disabled:""},null,512),[[a.e8,e.skipCompleted]]),M]),(0,n._)("label",z,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=t=>e.randomValue=t),disabled:""},null,512),[[a.e8,e.randomValue]]),H]),N],32),(0,n._)("form",{onSubmit:t[6]||(t[6]=(0,a.iM)((e=>this.$store.dispatch("logout")),["prevent"]))},[(0,n._)("label",V,[q,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=t=>e.username=t),disabled:""},null,512),[[a.nr,e.username]])]),P],32)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.dashboards,((e,t)=>((0,n.wg)(),(0,n.j4)(l,{key:t,dashboard:e,date:t},null,8,["dashboard","date"])))),128))])}var A=s(4509);const F={class:"dashboard-container"};function K(e,t,s,a,o,r){const i=(0,n.up)("TaskList");return(0,n.wg)(),(0,n.iD)("div",F,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.dashboard,((e,t)=>((0,n.wg)(),(0,n.j4)(i,{key:t,id:t,tasklist:e},null,8,["id","tasklist"])))),128))])}const Y={class:"tasklist-container"},Z={class:"tasklist-title"},R={class:"tasklist-name"},G={class:"tasklist-state"},W={key:0,class:"tasklist-tasks"},$={class:"tasklist-actions"};function B(e,t,s,a,r,i){const l=(0,n.up)("TaskElement");return(0,n.wg)(),(0,n.iD)("div",Y,[(0,n._)("div",{class:"tasklist-content",style:(0,o.j5)(i.style)},[(0,n._)("div",Z,[(0,n._)("span",R,(0,o.zw)(i.tasklistName),1),(0,n._)("span",G,(0,o.zw)(i.tasklistCompleted)+"/"+(0,o.zw)(i.tasklistSize),1)]),r.tasklistCollapsed?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",W,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.tasklistEntries,((e,t)=>((0,n.wg)(),(0,n.j4)(l,{key:t,task:e,id:t},null,8,["task","id"])))),128))]))],4),(0,n._)("div",$,[r.tasklistCollapsed?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"tasklist-action-button",onClick:t[0]||(t[0]=e=>i.toggleTasklist())},"+")):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"tasklist-action-button red",onClick:t[1]||(t[1]=e=>i.toggleTasklist())},"-"))])])}const J=e=>((0,n.dD)("data-v-35cd3d5c"),e=e(),(0,n.Cn)(),e),Q={class:"task_element-container"},X={class:"task_element-title"},ee=J((()=>(0,n._)("div",{class:"task_element-content"},null,-1)));function te(e,t,s,a,r,i){return(0,n.wg)(),(0,n.iD)("div",Q,[(0,n._)("div",X,[(0,n._)("span",{style:(0,o.j5)(i.style)},(0,o.zw)(i.taskPassed?"✅":"❌")+" "+(0,o.zw)(i.taskName),5)]),ee])}var se={name:"TaskElement",props:{task:{type:Object,required:!0},id:{type:String,required:!0}},computed:{taskPassed(){return this.task["TMeasurement"][0]["CheckResult"][0]["passed"]},taskName(){return this.task.excerpt},style(){return{color:this.taskPassed?"#63c001":"#df003b"}}},methods:{}};const ae=(0,D.Z)(se,[["render",te],["__scopeId","data-v-35cd3d5c"]]);var ne=ae,oe={name:"TaskList",props:{id:{type:String,required:!0},tasklist:{type:Object,required:!0}},data(){return{tasklistCollapsed:!0}},components:{TaskElement:ne},computed:{tasklistCompleted(){let e=0;for(const t in this.tasklist["TemperatureTask"])!0===this.tasklist["TemperatureTask"][t]["TMeasurement"][0]["CheckResult"][0]["passed"]&&e++;return e.toString()},tasklistSize(){const e=Object.keys(this.tasklist["TemperatureTask"]).length;return e.toString()},tasklistName(){return this.tasklist["TemperatureTaskType"].name},tasklistEntries(){return this.tasklist["TemperatureTask"]},style(){return{"border-color":this.tasklistCompleted===this.tasklistSize?"#63c001":"#df003b"}}},methods:{toggleTasklist(){this.tasklistCollapsed=!this.tasklistCollapsed}}};const re=(0,D.Z)(oe,[["render",B],["__scopeId","data-v-72c989f9"]]);var ie=re,le={name:"DashboardContainer",props:{dashboard:{type:Object,required:!0},date:{type:String,required:!0}},components:{TaskList:ie},computed:{},methods:{}};const de=(0,D.Z)(le,[["render",K],["__scopeId","data-v-017b6658"]]);var ce=de,ue={name:"DashboardSection",components:{DashboardContainer:ce},computed:{...(0,m.Se)(["dashboards","formattedDate"]),...(0,A.vn)(["date","skipCompleted","randomValue","username"])},methods:{}};const pe=(0,D.Z)(ue,[["render",U],["__scopeId","data-v-e3a43192"]]);var me=pe,ge={name:"App",components:{DashboardSection:me,LoginSection:C},computed:{...(0,m.Se)(["isLoggedIn","isLoading","message","messageHistory"])}};const ke=(0,D.Z)(ge,[["render",p]]);var he=ke,be=s(5431);(0,be.z)("/cleanupp-quick/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});s(2801),s(7658);const fe="https://cleanupp.azure-api.net/v1",we="8cb0bb42cc6448528405bac37d2ce4a1",ve="1",ye=(e,t)=>{const s="Basic "+btoa(e+":"+t),a=new Headers;return a.append("Authorization",s),a.append("Cookie","CAKEPHP=b58pvvsbpvb0haqisgru5jq85b"),a},_e=async(e,t,s)=>{const a=ye(e,t);a.append("Content-Type","application/json");const n=await fetch(fe+"/tasks/measurements/checkpoints/edit/"+ve+"/?subscription-key="+we,{method:"POST",headers:a,body:s});return 200!==n.status?null:await n.json()},De=async(e,t,s)=>{const a=await fetch(fe+"/tasks/todocounter/"+s+"/?subscription-key="+we,{method:"GET",headers:ye(e,t)});return 200!==a.status?null:await a.json()},Te=async(e,t,s)=>{const a=await fetch(fe+"/reporting/getdashboarddata/"+s+"/"+s+"/?subscription-key="+we,{method:"GET",headers:ye(e,t)});return 200!==a.status?null:await a.json()},Ce=(e,t)=>{t&&console.log("Random Value: ...");let s=null;switch(e["check"]){case"BETWEEN (inclusive)":s=Number(e["check_val_2"])-Number(e["check_val_1"])/2;break;case"<":s=Number(e["check_val_1"])-1;break;case">=":s=Number(e["check_val_1"])+1;break;case"<=":s=Number(e["check_val_1"])-1;break;case"=":s=!0;break;default:console.log("Unknown Check: "+e["check"]);break}return JSON.stringify({0:{CheckResult:{id:String(e["id"]),value:String(s),action:"",employee_id:String(null)}}})};var Se=(0,m.MT)({state:{username:"",password:"",date:(new Date).toISOString().substring(0,10),message:"",messageHistory:[],skipCompleted:!0,randomValue:!1,toDoCounter:null,dashboards:null,isLoggedIn:!1,isLoading:!1},getters:{getField:A.rz,isLoggedIn:e=>e.isLoggedIn,dashboards:e=>e.dashboards,isLoading:e=>e.isLoading,message:e=>e.message,messageHistory:e=>e.messageHistory,formattedDate:e=>{const t=new Date(e.date),s=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate();return s+"-"+a+"-"+n}},mutations:{updateField:A.L4,setUsername(e,t){e.username=t},setPassword(e,t){e.password=t},setDate(e,t){e.date=t},setLoggedIn(e,t){e.isLoggedIn=t},setToDoCounter(e,t){e.toDoCounter=t},setDashboards(e,t){e.dashboards=t},setLoading(e,t){e.isLoading=t,t||(e.message="",e.messageHistory=[])},setMessage(e,t){e.message=t,e.messageHistory.push(t)}},actions:{login({commit:e,dispatch:t},{username:s,password:a}){e("setUsername",s),e("setPassword",a),t("loadToDoCounter")},async loadToDoCounter({commit:e,dispatch:t,getters:s,state:a}){e("setLoading",!0),await De(a.username,a.password,s.formattedDate).then((t=>{t&&(e("setLoggedIn",!0),e("setToDoCounter",t))})).finally((()=>{e("setLoading",!1),t("loadDashboardsData")}))},async loadDashboardsData({commit:e,getters:t,state:s}){e("setLoading",!0),await Te(s.username,s.password,t.formattedDate).then((t=>{t&&e("setDashboards",t)})).finally((()=>e("setLoading",!1)))},async autocompleteTasks({commit:e,getters:t,state:s}){e("setLoading",!0);const a=t.dashboards[t.formattedDate];for(const n in a)for(const t in a[n]["TemperatureTask"]){const o=a[n]["TemperatureTask"][t].excerpt,r=a[n]["TemperatureTask"][t]["TMeasurement"][0]["CheckResult"][0];if(r["passed"]&&s.skipCompleted){e("setMessage","SKIPPED: "+o);continue}const i=Ce(r,s.randomValue);await _e(s.username,s.password,i).then((t=>{e("setMessage",t["passed"]?"SUCCESS: "+o:"FAILED: "+o)})).catch((()=>{e("setMessage","FAILED: "+o)}))}await Te(s.username,s.password,t.formattedDate).then((t=>{t&&e("setDashboards",t)})).finally((()=>e("setLoading",!1)))},logout({commit:e,state:t}){e("setLoggedIn",!1),e("setUsername",""),e("setPassword",""),e("setDate",(new Date).toISOString().substring(0,10)),e("setMessage",""),e("setLoading",!1),e("setToDoCounter",null),e("setDashboards",null),t.skipCompleted=!0,t.randomValue=!1}},modules:{}});(0,a.ri)(he).use(Se).mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,o){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],o=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,o,r=a[0],i=a[1],l=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(l)var c=l(s)}for(t&&t(a);d<r.length;d++)o=r[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},a=self["webpackChunkcleanupp_quick"]=self["webpackChunkcleanupp_quick"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(9358)}));a=s.O(a)})();
//# sourceMappingURL=app.b4eefddd.js.map